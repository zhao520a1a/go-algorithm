### 题目

[LeetCode 第 239 题](https://leetcode-cn.com/problems/sliding-window-maximum/)：给定一个数组 nums，有一个大小为 k 的滑动窗口从数组的最左侧移动到数组的最右侧。你只可以看到在滑动窗口 k 内的数字，滑动窗口每次只向右移动一位。返回滑动窗口最大值。

注意：你可以假设 k 总是有效的，1 ≤ k ≤ 输入数组的大小，且输入数组不为空。

```
示例：给定一个数组以及一个窗口的长度 k，现在移动这个窗口，要求打印出一个数组，数组里的每个元素是当前窗口当中最大的那个数。

输入：nums = [1, 3, -1, -3, 5, 3, 6, 7]，k = 3

输出：[3, 3, 5, 5, 6, 7]
```

### 解题思路

#### 思路 1

移动窗口，扫描，获得最大值。假设数组里有 n 个元素，算法复杂度就是 O(n)。这是最直观的做法。

#### 思路 2

利用一个双端队列来保存当前窗口中最大那个数在数组里的下标，双端队列新的头就是当前窗口中最大的那个数。通过该下标，可以很快地知道新的窗口是否仍包含原来那个最大的数。如果不再包含，我们就把旧的数从双端队列的头删除。

因为双端队列能让上面的这两种操作都能在 O(1) 的时间里完成，所以整个算法的复杂度能控制在 O(n)。

![img](http://s0.lgstatic.com/i/image2/M01/90/E9/CgotOV2IRR6AHz-iADMO9EtKhbI610.gif)

- 初始化窗口 k=3，包含 1，3，-1，把 1 的下标压入双端队列的尾部；

- 把 3 和双端队列的队尾的数据逐个比较，3 >1，把 1 的下标弹出，把 3 的下标压入队尾；
- -1<3，-1 压入双端队列队尾保留到下一窗口进行比较；
- 3 为当前窗口的最大值；
- 窗口移动，-3 与队尾数据逐个比较，-3<-1，-3 压入双端队列队尾保留；
- 3 为当前窗口的最大值；
- 窗口继续移动，5>-3，-3 从双端队列队尾弹出；
- 5 > -1，-1 从队尾弹出；
- 3 超出当前窗口，从队列头部弹出；
- 5 压入队列头部，成为当前窗口最大值；

继续移动窗口，操作与上述同理。

窗口最大值只需读取双端队列头部元素。
